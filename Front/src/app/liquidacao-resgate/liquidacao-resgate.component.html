<app-metamsg></app-metamsg>
<!--<div class="form-group" *ngIf="web3Service.conexaoComBlockchainEstaOK()">-->
  <br>

  <div class="title-loading row">
    <h2 class="page-header">Liquidação dos Resgates</h2>
    <app-bn-loading class="loading" *ngIf="estadoLista === 'undefined'"></app-bn-loading>
  </div>

  <div class="row" *ngIf="estadoLista === 'vazia'">
    <p>Não existem resgates para serem liquidados!</p>
  </div>

  <div class="row" *ngIf="estadoLista === 'cheia'">
    <input class="form-control barra-filtro" type="text" name="search" [(ngModel)]="filter" placeholder="Filtro">

    <div class="table-responsive-md">
      <table class="table table-striped table-bordered table-sm">

        <thead *ngIf="resgates.length > 0">

          <tr>
            <th [class.active]="order === 'deConta'" (click)="setOrder('deConta')" scope="col">Razão Social
                <i [hidden]="reverse" class="fa fa-caret-down"></i>
                <i [hidden]="!reverse" class="fa fa-caret-up"></i>
              </th>
            <th class="cnpj-table-cell" [class.active]="order === 'deCnpj'" (click)="setOrder('deCnpj')" scope="col">CNPJ
              <i [hidden]="reverse" class="fa fa-caret-down"></i>
              <i [hidden]="!reverse" class="fa fa-caret-up"></i>
            </th>
            <th [class.active]="order === 'tipo'" (click)="setOrder('tipo')" scope="col">Valor
              <i [hidden]="reverse" class="fa fa-caret-down"></i>
              <i [hidden]="!reverse" class="fa fa-caret-up"></i>
            </th>
            <th scope="col">HashID</th>
            <th scope="col">Hash da Comprovação Financeira</th>
            <th scope="col"></th>
          </tr>
        </thead>

        <tbody>

          <tr *ngFor="let resgate of resgates | orderBy: order :reverse : caseInsensitive :customComparator 
          | filter:filter; let i = index"
            [class.table-active]="isActive[i]">

            <td>{{resgate.razaoSocial}}</td>
            <td>{{resgate.cnpj}}</td>            
            <td>{{resgate.valorResgate | currency:'BND':'symbol':'1.2-2':'pt'}}</td>
            <td class="text-center">
              <a href="https://rinkeby.etherscan.io/tx/{{resgate.hashID}}">
                <i class="fa fa-link" aria-hidden="true"></i>
              </a>
            </td>
            <td class="text-center">
              <input type="text" [(ngModel)]="resgate.hashComprovacao" size="30">
            </td>
            <td><button type="button" class="btn btn-success btn-cabecalho" placement="bottom" (click)="liquidar(resgate)" [disabled]="hashTED">
                    <i class="fa fa-money" aria-hidden="true"></i> Liquidar
                  </button>
            </td>            
          </tr>

        </tbody>
      </table>
    </div>

    
  <!--</div>-->